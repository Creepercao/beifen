import{_ as I,h as f,c as U,a as n,n as y,d as l,w as o,j as x,r as v,o as z,e as V,k as _,E as m,i as L,l as N}from"./index-ChlhogER.js";const R={class:"container"},S={__name:"Login",setup(B){const i=f(!1),d=f(""),p=f(""),c=f(""),b=()=>{i.value=!0},g=()=>{i.value=!1},k=async()=>{try{const s=await _.post("/api/users/login",null,{params:{name:d.value,password:p.value}}),{status:e,message:t,token:a,user:u}=s.data;e==="success"?(m.success(t),localStorage.setItem("userToken",a),localStorage.setItem("userName",u.name),localStorage.setItem("userId",u.uuid),L.value=!0,N.push("/")):m.error(t)}catch(s){m.error("登录请求失败，请稍后再试"),console.error(s)}},C=async()=>{try{(await _.post("/api/users/save",{name:d.value,email:c.value,password:p.value})).data?(m.success("注册成功"),g()):m.error("注册失败，请检查输入")}catch(s){m.error("注册请求失败，请稍后再试"),console.error(s)}};return(s,e)=>{const t=v("el-input"),a=v("el-form-item"),u=v("el-button"),w=v("el-form");return z(),U("div",R,[n("div",{class:x(["flip-container",{flipped:i.value}])},[n("div",{class:"front",style:y({zIndex:i.value?1:2})},[l(w,{model:s.form,rules:s.rules,ref:"formRef"},{default:o(()=>[e[7]||(e[7]=n("h1",null,"登录",-1)),e[8]||(e[8]=n("br",null,null,-1)),l(a,{label:"用户名",prop:"username"},{default:o(()=>[l(t,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(a,{label:"密码",prop:"password"},{default:o(()=>[l(t,{type:"password",modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=r=>p.value=r),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(a,null,{default:o(()=>[l(u,{type:"primary",onClick:k},{default:o(()=>e[5]||(e[5]=[V("登录")])),_:1})]),_:1}),l(a,null,{default:o(()=>[l(u,{onClick:b},{default:o(()=>e[6]||(e[6]=[V("去注册")])),_:1})]),_:1})]),_:1},8,["model","rules"])],4),n("div",{class:"back",style:y({zIndex:i.value?2:1})},[l(w,{model:s.form,rules:s.rules,ref:"formRef"},{default:o(()=>[e[11]||(e[11]=n("h1",null,"注册",-1)),e[12]||(e[12]=n("br",null,null,-1)),l(a,{label:"用户名",prop:"username"},{default:o(()=>[l(t,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=r=>d.value=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(a,{label:"邮箱",prop:"email"},{default:o(()=>[l(t,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=r=>c.value=r),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(a,{label:"密码",prop:"password"},{default:o(()=>[l(t,{type:"password",modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=r=>p.value=r),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(a,null,{default:o(()=>[l(u,{type:"primary",onClick:C},{default:o(()=>e[9]||(e[9]=[V("注册")])),_:1})]),_:1}),l(a,null,{default:o(()=>[l(u,{onClick:g},{default:o(()=>e[10]||(e[10]=[V("返回登录")])),_:1})]),_:1})]),_:1},8,["model","rules"])],4)],2)])}}},T=I(S,[["__scopeId","data-v-3c6d0d0a"]]);export{T as default};
