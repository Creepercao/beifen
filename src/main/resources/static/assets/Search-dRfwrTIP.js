import{_ as I,r as u,o as N,G as V,m as D,c as C,g as n,j as p,h as r,i as v,s as S,F as b,b as j,p as M,e as E,k as g,f as w,t as _}from"./index-CpKDPpXK.js";const G={class:"search-results"},L={class:"toolbar"},O={class:"article-title"},Q={class:"article-meta"},R={class:"author"},T={class:"likes"},Y={class:"date"},H={__name:"Search",setup(J){const m=u([]),d=u(1),f=u(10),c=u("title"),i=u("ascending"),x=M(),h=x.query.query;N(()=>{h&&A(h)}),V(()=>x.query.query,t=>{A(t)});const $=async(t="")=>{try{const e=await E.post("/api/articles/search",null,{params:{title:t}});m.value=e.data}catch(e){console.error("è·å–æ–‡ç« å¤±è´¥",e)}},q=D(()=>{const t=(d.value-1)*f.value,e=d.value*f.value;return m.value.slice(t,e)}),z=D(()=>{const t=q.value;return c.value?t.sort((e,l)=>{let s=e[c.value],o=l[c.value];return i.value==="ascending"?s>o?1:s<o?-1:0:s<o?1:s>o?-1:0}):t}),k=t=>{c.value===t?i.value=i.value==="ascending"?"descending":"ascending":(c.value=t,i.value="ascending")},y=t=>c.value===t?i.value==="ascending"?"el-icon-arrow-up":"el-icon-arrow-down":"el-icon-sort",A=(t=h)=>{$(t)},B=t=>{d.value=t},F=t=>{const e=new Date(t),l=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${l}-${s}-${o}`};return(t,e)=>{const l=g("DCaret"),s=g("el-icon"),o=g("el-link"),P=g("el-pagination");return w(),C("div",G,[n("div",L,[n("div",{class:"sort-item",onClick:e[0]||(e[0]=a=>k("aid"))},[e[3]||(e[3]=p(" æ–‡ç« ID ")),r(s,{class:S([y("aid"),"sort-icon"])},{default:v(()=>[r(l)]),_:1},8,["class"])]),n("div",{class:"sort-item",onClick:e[1]||(e[1]=a=>k("title"))},[e[4]||(e[4]=p(" æ ‡é¢˜ ")),r(s,{class:S([y("title"),"sort-icon"])},{default:v(()=>[r(l)]),_:1},8,["class"])]),n("div",{class:"sort-item",onClick:e[2]||(e[2]=a=>k("createdAt"))},[e[5]||(e[5]=p(" å‘è¡¨æ—¶é—´ ")),r(s,{class:S([y("createdAt"),"sort-icon"])},{default:v(()=>[r(l)]),_:1},8,["class"])])]),(w(!0),C(b,null,j(z.value,a=>(w(),C("div",{key:a.aid,class:"article-item"},[n("div",O,[r(o,{href:`/#/article/${a.aid}`,class:"article-link"},{default:v(()=>[p(_(a.title),1)]),_:2},1032,["href"])]),n("div",Q,[n("span",R,_(a.name),1),n("span",T,"ğŸ‘ "+_(a.likes),1),n("span",Y,_(F(a.createdAt)),1)])]))),128)),r(P,{"current-page":d.value,"page-size":f.value,total:m.value.length,onCurrentChange:B,layout:"prev, pager, next, jumper"},null,8,["current-page","page-size","total"])])}}},U=I(H,[["__scopeId","data-v-c461f25d"]]);export{U as default};
