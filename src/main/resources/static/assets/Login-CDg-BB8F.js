import{_ as N,r as m,c as E,g as n,q as k,h as l,i as s,s as R,k as c,f as w,j as g,n as T,d as j,e as _,E as d,v as q,x as M}from"./index-CpKDPpXK.js";const $={class:"container"},A={__name:"Login",setup(F){const p=m(!1),U=m(""),i=m(""),v=m(""),V=m(""),I=m(""),b=()=>{p.value=!0},y=()=>{p.value=!1},S=async()=>{try{const r=await _.post("/api/users/login",null,{params:{Useruuid:U.value,password:i.value}}),{status:e,message:t,role:a,token:u,uuid:f,name:o,email:C,phone:D,address:z,avatar:B,register:L}=r.data;e==="success"?(d.success(t),localStorage.setItem("userToken",u),localStorage.setItem("role",a),localStorage.setItem("uuid",f),localStorage.setItem("name",o),localStorage.setItem("email",C),localStorage.setItem("phone",D),localStorage.setItem("address",z),localStorage.setItem("avatar",B),localStorage.setItem("register",L),q.value=!0,M.push("/")):d.error(t)}catch(r){d.error("登录请求失败，请稍后再试"),console.error(r)}},x=async()=>{try{const r=await _.post("/api/users/save",{email:v.value,password:i.value,name:V.value}),{status:e,message:t}=r.data;if(e==="success"){d.success(t);const a=await _.get("/api/users/getUUID",{params:{email:v.value}});if(a.data.status==="success"){const u=a.data.uuid;I.value=u,d.success(`注册成功！您的 UUID 为：${u}`)}else d.error(a.data.message);y()}else d.error(t)}catch(r){d.error("注册请求失败，请稍后再试"),console.error(r)}};return(r,e)=>{const t=c("el-input"),a=c("el-form-item"),u=c("el-button"),f=c("el-form");return w(),E("div",$,[n("div",{class:R(["flip-container",{flipped:p.value}])},[n("div",{class:"front",style:k({zIndex:p.value?1:2})},[l(f,null,{default:s(()=>[e[7]||(e[7]=n("h1",null,"登录",-1)),e[8]||(e[8]=n("br",null,null,-1)),l(a,{label:"UUID"},{default:s(()=>[l(t,{modelValue:U.value,"onUpdate:modelValue":e[0]||(e[0]=o=>U.value=o),placeholder:"请输入 UUID"},null,8,["modelValue"])]),_:1}),l(a,{label:"密码"},{default:s(()=>[l(t,{type:"password",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(a,null,{default:s(()=>[l(u,{type:"primary",onClick:S},{default:s(()=>e[5]||(e[5]=[g("登录")])),_:1})]),_:1}),l(a,null,{default:s(()=>[l(u,{onClick:b},{default:s(()=>e[6]||(e[6]=[g("去注册")])),_:1})]),_:1})]),_:1})],4),n("div",{class:"back",style:k({zIndex:p.value?2:1})},[l(f,null,{default:s(()=>[e[12]||(e[12]=n("h1",null,"注册",-1)),e[13]||(e[13]=n("br",null,null,-1)),l(a,{label:"姓名"},{default:s(()=>[l(t,{modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=o=>V.value=o),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(a,{label:"邮箱"},{default:s(()=>[l(t,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=o=>v.value=o),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(a,{label:"密码"},{default:s(()=>[l(t,{type:"password",modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=o=>i.value=o),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(a,null,{default:s(()=>[l(u,{type:"primary",onClick:x},{default:s(()=>e[9]||(e[9]=[g("注册")])),_:1})]),_:1}),l(a,null,{default:s(()=>[l(u,{onClick:y},{default:s(()=>e[10]||(e[10]=[g("返回登录")])),_:1})]),_:1}),I.value?(w(),T(a,{key:0},{default:s(()=>[e[11]||(e[11]=n("p",null,"注册成功！您的 UUID 是：",-1)),l(t,{value:I.value,readonly:""},null,8,["value"])]),_:1})):j("",!0)]),_:1})],4)],2)])}}},H=N(A,[["__scopeId","data-v-2a275528"]]);export{H as default};
