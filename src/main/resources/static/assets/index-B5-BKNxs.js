import{_ as k,r as i,o as E,a as D,c as o,w as A,F as N,b as B,d as p,e as C,E as H,f as n,g as u,h as L,i as M,j as S,t as m,k as V,l as z}from"./index-CpKDPpXK.js";const T={class:"main"},b={class:"article-list","infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"},F={class:"article-title"},j={class:"article-meta"},I={class:"author"},P={class:"date"},U={key:0,class:"loading-text"},Y={key:1,class:"no-more-text"},v=7,$={__name:"index",setup(q){const _=i([]),r=i([]),a=i(!1),l=i(1),d=i(!0),g=async()=>{if(!a.value){a.value=!0;try{const e=await C.get("/api/articles");_.value=e.data,w()}catch{H.error("加载文章失败")}finally{a.value=!1}}},w=()=>{const e=(l.value-1)*v,t=l.value*v;r.value=_.value.slice(e,t)},f=()=>{if(!d.value||a.value)return;const e=l.value*v,t=(l.value+1)*v,s=_.value.slice(e,t);s.length>0?(r.value=[...r.value,...s],l.value++):d.value=!1},x=e=>{const t=new Date(e),s={year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("zh-CN",s)},h=()=>{const e=document.documentElement.scrollHeight,t=window.scrollY||document.documentElement.scrollTop,s=window.innerHeight;e-t-s<=100&&!a.value&&d.value&&f()};return E(()=>{g(),window.addEventListener("scroll",h)}),D(()=>{window.removeEventListener("scroll",h)}),(e,t)=>{const s=V("el-link"),y=z("infinite-scroll");return n(),o("div",T,[A((n(),o("section",b,[(n(!0),o(N,null,B(r.value,c=>(n(),o("div",{key:c.aid,class:"article-item"},[u("div",F,[L(s,{href:`/#/article/${c.aid}`,style:{"font-size":"30px","margin-left":"5px",color:"white"}},{default:M(()=>[S(m(c.title),1)]),_:2},1032,["href"])]),u("div",j,[u("span",I,m(c.name),1),u("span",P,m(x(c.createdAt)),1)])]))),128)),a.value?(n(),o("div",U," 正在加载... ")):p("",!0),d.value?p("",!0):(n(),o("div",Y," 没有更多内容了 "))])),[[y,f]])])}}},J=k($,[["__scopeId","data-v-38ccf8a4"]]);export{J as default};
