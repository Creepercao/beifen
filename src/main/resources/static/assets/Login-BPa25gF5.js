import{_ as U,g as i,c as z,a as u,n as y,d as l,w as s,h as R,r as f,o as q,e as g,i as _,E as v}from"./index-q5VNWHGZ.js";const B={class:"container"},E={__name:"Login",setup(I){const m=i(!1),n=i(""),d=i(""),V=i(""),b={username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:3,message:"用户名至少3个字符",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,message:"密码至少6个字符",trigger:"blur"}]},c=()=>{m.value=!0},k=()=>{m.value=!1},C=async()=>{var t,e;try{const o=await _.post("/api/users/login",{username:n.value,password:d.value});v.success("登录成功"),console.log("登录成功",o.data)}catch(o){v.error(((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.message)||"登录失败"),console.error("登录失败",o)}},x=async()=>{var t,e;try{const o=await _.post("/api/users/register",{username:n.value,password:d.value,email:V.value});v.success("注册成功"),console.log("注册成功",o.data)}catch(o){v.error(((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.message)||"注册失败"),console.error("注册失败",o)}};return(t,e)=>{const o=f("el-input"),a=f("el-form-item"),p=f("el-button"),w=f("el-form");return q(),z("div",B,[u("div",{class:R(["flip-container",{flipped:m.value}])},[u("div",{class:"front",style:y({zIndex:m.value?1:2})},[l(w,{model:t.form,rules:b,ref:"formRef"},{default:s(()=>[e[8]||(e[8]=u("h1",null,"登录",-1)),e[9]||(e[9]=u("br",null,null,-1)),l(a,{label:"用户名",prop:"username"},{default:s(()=>[l(o,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=r=>n.value=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(a,{label:"密码",prop:"password"},{default:s(()=>[l(o,{type:"password",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=r=>d.value=r),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(a,{label:"验证码"},{default:s(()=>[l(o),e[5]||(e[5]=u("img",null,null,-1))]),_:1}),l(a,null,{default:s(()=>[l(p,{type:"primary",onClick:C},{default:s(()=>e[6]||(e[6]=[g("登录")])),_:1})]),_:1}),l(a,null,{default:s(()=>[l(p,{onClick:c},{default:s(()=>e[7]||(e[7]=[g("去注册")])),_:1})]),_:1})]),_:1},8,["model"])],4),u("div",{class:"back",style:y({zIndex:m.value?2:1})},[l(w,{model:t.form,rules:b,ref:"formRef"},{default:s(()=>[e[12]||(e[12]=u("h1",null,"注册",-1)),e[13]||(e[13]=u("br",null,null,-1)),l(a,{label:"用户名",prop:"username"},{default:s(()=>[l(o,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=r=>n.value=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(a,{label:"邮箱",prop:"email"},{default:s(()=>[l(o,{modelValue:V.value,"onUpdate:modelValue":e[3]||(e[3]=r=>V.value=r),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(a,{label:"密码",prop:"password"},{default:s(()=>[l(o,{type:"password",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=r=>d.value=r),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(a,null,{default:s(()=>[l(p,{type:"primary",onClick:x},{default:s(()=>e[10]||(e[10]=[g("注册")])),_:1})]),_:1}),l(a,null,{default:s(()=>[l(p,{onClick:k},{default:s(()=>e[11]||(e[11]=[g("返回登录")])),_:1})]),_:1})]),_:1},8,["model"])],4)],2)])}}},N=U(E,[["__scopeId","data-v-176e313c"]]);export{N as default};
